\documentclass[a4paper]{book}

\usepackage{listings}
\usepackage[usenames,dvipsnames,svgnames]{xcolor}

\lstset{basicstyle=\ttfamily,columns=flexible}
\makeatletter
\begingroup
\catcode13=\active
\@iden{\endgroup\def\mine@activeCR{^^M}}

\def\mine@hyphen#1{%
  \unless\ifx\lst@OutputBox\@gobble
    \lst@ifwhitespace
      \expandafter\unless\expandafter
      \ifx\mine@activeCR#1%
        \lst@XPrintToken
        \lst@token{{\color{blue}\detokenize{-#1}}}%
        \lst@length\tw@
        \lst@XPrintToken
        \lst@whitespacefalse
        \expandafter\expandafter
        \expandafter\expandafter
        \expandafter\expandafter
        \expandafter\@gobbletwo
      \fi
    \fi
  \fi
  \SAVE@lst@hyphen#1}

\lstdefinelanguage{GMT}{
    SelectCharTable=\lst@LetSaveDef{`\-}\SAVE@lst@hyphen\mine@hyphen,
    keywords=[1]{gmt,awk,grep,cut},
    keywords=[2]{
		blockmean, blockmedian, blockmode, filter1d, fitcircle,
		gmt2kml, gmtconnect, gmtconvert, gmtdefaults, gmtget,
		gmtinfo, gmtmath, gmtselect, gmtset, gmtsimplify,
		gmtspatial, gmtvector, gmtwhich, grd2cpt, grd2rgb,
		grd2xyz, grdblend, grdclip, grdcontour, grdcut,
		grdedit, grdfft, grdfilter, grdgradient, grdhisteq,
		grdimage, grdinfo, grdlandmask, grdmask, grdmath,
		grdpaste, grdproject, grdraster, grdreformat, grdsample,
		grdtrack, grdtrend, grdvector, grdview, grdvolume,
		greenspline, kml2gmt, makecpt, mapproject, nearneighbor,
		project, ps2raster, psbasemap, psclip, pscoast,
		pscontour, pshistogram, psimage, pslegend, psmask,
		psrose, psscale, pstext, pswiggle, psxyz,
		psxy, sample1d, spectrum1d, sph2grd, sphdistance,
		sphinterpolate, sphtriangulate, splitxyz, surface, trend1d,
		trend2d, triangulate, xyz2grd, gshhg, img2grd,
		pscoupe, psmeca, pspolar, psvelo, mgd77convert,
		mgd77info, mgd77list, mgd77magref, mgd77manage, mgd77path,
		mgd77sniffer, mgd77track, dimfilter, gmtgravmag3d, gravfft,
		grdgravmag3d, grdredpol, grdseamount, pssegyz, pssegy,
		segy2grd, backtracker, grdpmodeler, grdrotater, grdspotter,
		hotspotter, originator, rotconverter, x2sys_binlist, x2sys_cross,
		x2sys_datalist, x2sys_get, x2sys_init, x2sys_list, x2sys_merge,
		x2sys_put, x2sys_report, x2sys_solve,
	},
}
\makeatother
\lstdefinestyle{GMTCode}{
    language=GMT,
    basicstyle=\ttfamily\small,
    keywordstyle=[1]\color{cyan},
    keywordstyle=[2]\color{red},
    stringstyle=\itshape,
    numbers=left,
    numberstyle=\tiny,
    numbersep=5pt,
    aboveskip=10pt,
    belowskip=10pt,
    frame=leftline,
}
\lstnewenvironment{GMTCode}{
    \lstset{
        style=GMTCode,
    }
}{}

\begin{document}

\begin{GMTCode}
gmt psbasemap -R0/10/0/10 -JX10c/10c -B1 > test.ps
\end{GMTCode}

\end{document}
